#!/bin/bash
for i in *; do
    extension="${filename##*.}"
    if [ -d "$i" ] || [ ! $extension == ".jpg" ] || [ ! $extension == ".png" ]; then
        continue
    fi
    file_output=$(file "$i")
    resolution=$(echo $file_output | egrep -o '([1-9]{3})\w+(\s[x]\s)+([1-9]{3})\w') # Looks for pattern of 000 x 000 up to 9999 x 9999 and outputs what is found
    
    if [ "$resolution" == "" ]; then # Checks if resolution is empty string
        
        resolution=$(echo $file_output | egrep -o '([1-9]{3})\w+([x])+([1-9]{3})\w') # Looks for pattern of 000 x 000 up to 9999 x 9999 and outputs what is found
        
        if [ "$resolution" == "" ]; then

            if [ ! -d "Unknown" ]; then
                
                mkdir "Unknown"

            fi
            
            mv "$i" "Unknown"
            
            continue
        fi

    fi
    
    res_dir_name=$(echo $resolution | sed "s/\ //g")

    if [ ! -d "$res_dir_name" ]; then
        mkdir "$res_dir_name"
    fi

    mv "$i" "$res_dir_name"

done
